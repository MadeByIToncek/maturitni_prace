\documentclass[12pt,a4paper,titlepage]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
%\usepackage{mathptmx}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage[left=3cm,right=3cm,top=2.5cm,bottom=2.5cm]{geometry}
\usepackage[dvipsnames]{xcolor}
\usepackage[czech]{babel}
\usepackage[
  backend=biber,
  style=iso-numeric,
  maxbibnames=99, 
  style=verbose
]{biblatex}
\addbibresource{maturitni_prace.bib}
\usepackage{graphicx}
\usepackage{minted}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\graphicspath{ {./images/} }
\usepackage{indentfirst}
\usepackage{setspace}
\fontfamily{ptm}
\usepackage{tabularx,ragged2e,booktabs}
\usepackage{hyperref}
\usepackage{csquotes}
\usepackage{xurl}
\usepackage{chngcntr}

\definecolor{link-color}{rgb}{.30,.30,.30}

\newcommand{\link}[2]{\href{#1}{\textcolor{link-color}{\textit{#2}}}}%
\newcommand{\todo}[1]{\textcolor{red}{#1}}

\DeclareBibliographyCategory{skipbibliography}
\DeclareCiteCommand{\fcite}[\mkbibfootnote]
  {\usebibmacro{prenote}}
  {\addtocategory{skipbibliography}{\thefield{entrykey}}%
   \usedriver{\DeclareNameAlias{sortname}{default}}{\thefield{entrytype}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}

\author{Antonín Vřešťál}
\title{Tvorba astronomických videí}
\renewcommand{\baselinestretch}{1.5} 

%No widows
\clubpenalty = 10000 %chktex 1
\widowpenalty = 10000 %chktex 1
\displaywidowpenalty = 10000 %chktex 1

%No hyphens
\righthyphenmin = 62 %chktex 1
\lefthyphenmin = 62 %chktex 1
\hyphenpenalty = 10000 %chktex 1
\exhyphenpenalty = 10000 %chktex 1
\sloppy
\hbadness = 10000 %chktex 1

\makeatletter
\@addtoreset{footnote}{part}
\makeatother

\counterwithin*{section}{part}

\begin{document}
\begin{titlepage}
	\begin{center}
		Waldorfská základní a~střední škola Semily, p.\  o.\\
		Tyršova 485, 513 01 Semily
		\vspace*{1cm}
 
		\vfill		

		\Huge
		Tvorba astronomických videí
 
		\normalsize
		\vspace{0.5cm}
		Maturitní práce 	 
		 
		\vfill		
	\end{center}
	Vypracoval: Antonín Vřešťál\\
	Vedoucí práce: MgA. Mojmír Dlabola\\
 \end{titlepage}
\newpage
\section*{Prohlášení}
Prohlašuji, že jsem tuto projektovou maturitní práci \enquote{Tvorba astronomických videí} napsal samostatně a~výhradně s~použitím citovaných pramenů. Souhlasím, aby má projektová maturitní práce byla zpřístupněna veřejnosti ke studijním účelům.
\section*{Poděkování}
Děkuji MgA. Mojmíru Dlabolovi, vedoucímu mé práce, za podnětné připomínky k~projektové maturitní práci po stránce obsahové i~stylistické a~za doporučení vhodné a~zajímavé literatury. Velmi si vážím času, který věnoval vedení mé práce.\\
\\
V \hspace{0.05cm} \rule[-3pt]{4cm}{0.5pt} \hspace{0.05cm} dne \hspace{0.05cm} \rule[-3pt]{4cm}{0.5pt}\\
\\
\\
\hspace{0.5cm} \rule[-3pt]{5.5cm}{0.5pt}\\
\indent \indent Antonín Vřešťál\\

\newpage
\tableofcontents
\newpage
\part{Teoretická část}
\section{Úvod}
Tvorbou astronomických videí se zabývám více než tři roky, a~to jako editor ve skupině AstroCrew. Skupinu AstroCrew tvoří tři členové:

\begin{itemize}
	\item Dan Kurtin píše scénáře,
	\item Terka Toušová načítá text na mikrofon,
	\item já (Antonín Vřešťál) k~nahrávkám následně tvořím grafický podklad a~kompletuji veškerá data do výsledného videa.
\end{itemize}
Hotová videa následně publikujeme na našem YouTube kanálu. 

Základním cílem skupiny AstroCrew je zpřístupnit široké veřejnosti zajímavé úkazy na obloze pomocí animací a~videí. Diváci mají poté lepší přehled o~umístění jednotlivých úkazů na noční obloze a~mohou je následně lépe nalézt.

Spolupracujeme s~planetáriem v~liberecké iQLandii. Na jejich akcích \enquote{Večery pod hvězdami} jsou naše nová videa promítána přímo v~planetáriu jako součást oficiálního programu. Kromě videí o~astronomii zpřístupňujeme široké veřejnosti i~kosmonautiku. V~tomto odvětví se věnujeme primárně živým přenosům startů raket.

Téma tvorby astronomických videí jsem si vybral zejména kvůli jeho obsáhlosti. V~rámci produkce videí ve skupině AstroCrew programuji animační nástroje, a následně pomocí nich animuji scénu. Výsledná data nakonec kompletuji ve finální video. V~této maturitní práci se zaměřuji zejména na moji část produkce videa. Ostatní části tvorby videa, které nezpracovávám já, jsou zastoupeny pouze stručně a obsahově pro doplnění kontextu. 
\section{Postup vytváření videa}\label{makingof}
\subsection{Příprava textových podkladů}\label{makingof:text-prep}
Téma připravovaného videa je většinou rozhodnuto s~dostatečným předstihem na základě společném diskuze. Každé video je unikátní s~ohledem na námi zvolené požadavky. Tyto požadavky vybíráme na základě chyb, nedostatků a~nových zjištění nabytých při tvorbě předchozích videí. V~případě videa, týkajícího se úkazů na noční obloze v~roce 2025, byla hlavním tématem diskuze o~jeho délce s~ohledem na rozhodnutí, které úkazy do videa budou zahrnuty a~které bude nutno vynechat.

Dalším krokem v~produkci videa je sepsání scénáře naším scénáristou Danem Kurtinem. Scénář videa určuje, jak bude celé video navenek působit, jaké informace bude obsahovat a~v~jakém sledu a~hlavně jakým způsobem budou tyto informace divákovi podány. I~dobrý nápad může totiž rychle ztroskotat, pokud není promyšleno, jak bude tento nápad prezentován.

Do našich videí, která se zaměřují hlavně na úkazy na obloze, se dají podklady shánět v~odborných článcích, na amatérských profilech na sociálních sítích nebo přímo v~programech simulujících umístění objetků na noční obloze. Tyto programy, jako je například Stellarium\footnote{program na simulaci noční oblohy, více informací v kapitole~~\ref{makingof:stellarium}}, vytvářejí na základě vědeckých měřeních opravdu věrný obrázek budoucnosti. 

Tento fakt se nám hodí při našich videích, která mají shrnovat nejdůležitější úkazy v~budoucím roce. V~tomto případě vybíráme většinou patnáct až dvacet úkazů, které může pozorovat i~úplný amatér a~to většinou bez použití jakékoliv techniky. Dalším naším typickým obsahem videí je souhrn každoročního dění na obloze v~jednotlivých měsících roku. Způsob vytváření scénáře je dost podobný v~obou případech --- pokaždé chronologicky prezentujeme to, co bude vidět v~noci na obloze.

Jsou samozřejmě úkazy, které se opakují pravidelně každý rok. To jsou například meteorické roje, letní noční svítící oblaka nebo třeba viditelnost zvířetníkového světla\footnote{prach nacházející se v okolí ekliptiky sluneční soustavy, který je pod jistými světelnými podmínkami vidět na noční obloze jako světlý pruh nad východním a západním obzorem}. Informace o~těchto událostech jsou většinou snadno dohledatelné. Pokaždé je však nutné zjistit, zda v~období, kdy k~této události dojde, nebude na obloze rušit Měsíc svým svitem. Ten totiž při meteorických rojích může úplně znemožnit pozorování. I~na to je dobré diváka upozornit, protože viditelnost těchto úkazů se může rok od roku měnit.

Další kategorií jsou úkazy, které jsou poměrně běžné, ale neopakují se každý rok ve stejný čas. Někdy k~nim zkrátka dojde a~bez podrobnějších informací není možné vědět, kdy nastanou. Do této kategorie spadají například zatmění Slunce a~Měsíce, přílety jasnějších komet nebo třeba opozice planet (období, kdy je určitá planeta z~našeho pohledu na opačné straně než Slunce, a~jeví se tak jasněji). Zmínku o~těchto jevech můžeme najít již poměrně dopředu v~různých odborných článcích, které nám dokáží významně usnadnit práci s~hledáním. Z~česko-slovenských webových stránek to může být jmenovitě třeba stránka \link{https://www.astro-novinky.eu}{astro-novinky.eu} a~ze zahraničních například stránka \link{https://in-the-sky.org}{in-the-sky.org}, která obsahuje i~velmi pěkně zpracovaný kalendář úkazů na několik let dopředu.

Existuje spousta krásných úkazů, o~kterých se ale dopředu moc nepíše. Pro ně je často potřeba využít právě primární zdroj, kterým je většinou Stellarium. Úkolem je prohledat den po dni oblohu a~najít zejména zajímavé konjunkce (zdánlivá přiblížení objektů) nebo zákryty hvězd nebo planet Měsícem.\@ 

Náš scénárista Daniel Kurtin mi k~tvorbě scénáře řekl: \enquote{Začnu vždy tím, že si vyberu nějaký objekt. Typicky začínám Merkurem. Následně si zrychlím čas a~pozoruji, jestli se Merkur nepřiblíží k~nějaké jiné planetě nebo k~Měsíci, či zda se dokonce nesetká s~nějakým jasnějším objektem vzdáleného vesmíru, například nějakou hvězdokupou. Stejně postupuji i~u~zbylých planet a~nakonec u~Měsíce. Tento proces je skutečně užitečný, protože lze vždy nalézt navíc něco, o~čem jsem před tím ještě žádnou zmínku nenašel.}

Poslední skupinou jsou pak jevy, které předpovědět nelze. V~našich videích je proto nijak konkrétně nezmiňujeme, protože zkrátka nevíme, kdy nebo zda vůbec, nastanou. Zpravidla jde o~přílety velmi jasných komet, které astronomové mohou objevit i~třeba jen pár týdnů před průletem kolem Země,  viditelnost slunečních skvrn na Slunci a~s~tím i~spojený výskyt polárních září, dále pak jasné bolidy nebo stále přibývající přelety \enquote{vláčků} satelitů Starlink\footnote{satelity konstelace satelitů Starlink jsou vypouštěny v dávkách po přibližně 20 satelitech, které se několik dní drží relativně blízko u sebe. Na obloze poté vypadají jako \enquote{vláček} satelitů, cestujících po obloze.}. V~budoucnu se možná i~na tento typ videí, ve kterých vysvětlíme podstatu takových jevů, zaměříme. 

Jakmile Dan tento seznam cílů získá, začne k~nim dohledávat podrobnější informace. Nejlepším zdrojem pro základní informace o~objektech je opět Stellarium. Zde může najít čas viditelnosti a~pozici na obloze. U~některých událostí se tyto parametry výrazně liší v~závislosti na poloze pozorovatele. V~takovýchto příkladech udáváme informace pro Prahu a~zdůrazňujeme, že by si měl každý pozorovatel vyhledat údaje pro svoji přesnou lokaci. Další údaje jako například původ nebo vzhled daného jevu lze nalézt již na klasických webových stránkách typu Wikipedia, nebo v~klasické literatuře či v~odborných časopisech typu Vesmír.

Když takové video tvoříme, musíme myslet na to, že divák nebude chtít strávit sledováním celý den a~že to nesmíme s~kvantitou informací přehánět. To je většinou náš zásadní problém a~nakonec musíme obsah zkracovat, různě upravovat a~některé informace vynechat. 

Neméně důležitou stránkou je i~způsob, jakým je daná informace sdělena. Je tedy třeba klást důraz na větnou skladbu a~správnou návaznost informací. To je totiž základním cílem celého videa --- srozumitelně předat informace. Text také musí být dobře čitelný, aby Terka při nahrávání netrpěla a~diváci pochytili obsah sdělení.

\subsection{Příprava zvukových podkladů}\label{makingof:audio-prep}
Po dokončení scénáře jde na řadu samotné nahrávání audiostopy. Proces nahrávání je obvykle uzpůsobený pro každý samostatný projekt. Pro obě videa, řešená touto projektovou maturitní prací, byl proces tvorby zvuku víceméně shodný, až na malé detaily. 

Terka standardně nahrává audiostopy v~domácím nahrávacím studiu. Zde má k~dispozici standardní zpěvový mikrofon a~zvukový panel, který je připojen k~počítači. Zvuk poté nahrává v~Audacity\footnote{jednoduchý open-source program určený pro nahrávání a střih zvuku.} a~odesílá v~plné kvalitě ke zpracování. 

Tentokrát byla nucena z~časových důvodů nahrávat audiostopu na mobilní telefon na kolejích v~Praze. Kombinace těchto faktorů způsobila, že prosincové video obsahuje výrazný šum na pozadí nahrávky, který není možné úplně odstranit. Tento problém se nám podařilo vyřešit v~následujícím videu pomocí \enquote{peřinového bunkru}\footnote{\enquote{peřinový bunkr} představuje jednoduchou strukturu, postavenou z peřiny, pod kterou je možné nahrávat bez ozvěny a se sníženou úrovní ruchů.}, který značnou část šumu na pozadí odfiltroval. I~bez speciálních zvukových panelů, které jsou pro tento účel instalovány ve studiích, se nám podařilo výrazně zvýšit kvalitu zvukové stopy. Porovnání šumu na zvukových stopách je znázorněno frekvenční analýzou na obrázku níže.
\begin{figure}[H]
	\centering
	\includegraphics[width=.8\textwidth]{fourier.png}
	\caption{Porovnání šumové stopy projektu Rok 2025 (vlevo, využit \enquote{peřinový bunkr} pro snížení hladiny šumu) a~projektu Prosinec (vpravo, bez \enquote{peřinového bunkru}).}\label{img:fourier}
\end{figure}
\subsection{Animování oblohy v~programu Stellárium}\label{makingof:stellarium}
Celý proces animování začíná prací se scénářem. Ze scénáře se vypíše seznam jednotlivých scén a~přechodů mezi nimi. Pro tento úkol jsem si vytvořil speciální formát zápisu, který obsahuje vše, co je potřebné k~vytvoření jednotlivých přechodů ve videu. Viz tabulka níže.

\begin{table}[H]
	\centering
	\begin{tabularx}{\linewidth}{lc*{5}{>{\RaggedRight\arraybackslash}X}}
	\toprule
	\# scény    & Směr scény & Čas          & Souhvězdí         & Speciální objekty      \\ \midrule
	0000        & Z obzor    & západ slunce & Labuť, Lyra, Orel & Letní trojúhelník      \\ \addlinespace
	0001        & SZ obzor   & západ slunce & dtto, Herkules    & Herkulův květináč, M13 \\ \addlinespace
	0002        & Z obzor    & západ slunce & dtto              & ---                    \\ \addlinespace
	\ldots      & \ldots     & \ldots       & \ldots            & \ldots                 \\ \bottomrule
	\end{tabularx}
	\caption{Ukázka tabulky s~informacemi o~scénách}\label{tab:scenar}
\end{table}		

Většina animací, které se v~těchto videích nachází, byly vytvořeny pomocí simulačního programu Stellarium.\@ \enquote{Tento program je open-source (jeho zdrojový kód je volně dostupný) a~jeho primárním účelem je realistická simulace noční oblohy při pohledu očima nebo dalekohledem}\footcite{stellarium:homepage}. Stellarium poskytuje širokou nabídku programovatelných rozhraní. Pro účely této práce využívám webový server, přes který lze instanci Stellaria ovládat z~prohlížeče a~skriptovací rozhraní, které umožňuje interakci se Stellariem pomocí programovacího jazyka, založeného na standardu ECMAScript\fcite{wiki:ecmascript} (využívaného například jazykem JavaScript).

Největším problémem pro využití Stellaria v~produkci videí je fakt, že jeho tvůrci nepočítali s~jeho využitím pro tvorbu videí. Neexistuje tam například funkce, která by Stellariu řekla \enquote{Otoč se plynule na tyto souřadnice a~přitom nahraj video}. Jedinou možností, jak získat tuto animaci, je export každého samostatného snímku jako separátního souboru a~tyto jednotlivé snímky následně spojit do finálního videa pomocí nástroje jako FFmpeg\footnote{FFMpeg je v základu nástroj na převádění videí mezi jednotlivými formáty uložení. Podporuje i rozdělení videa na jednotlivé snímky, sestavení jednotlivých snímků zpět do videa, vysílání videa přes internet nebo jeho zachytávání.}. 

Prvním krokem v~tomto procesu je získání souřadnic jednotlivých snímků. Do tohoto momentu mám pouze informace o~začátku a~konci přechodu. Tyto informace obsahují azimut, výšku, přiblížení pohledu, datum a~čas. Z~těchto dat dále sestavím vektory $\vec{s}$ a~$\vec{e}$, které označují začátek a~konec přechodu v~pětidimenzionálním prostoru. 5D prostor je velice obtížné si představit, proto ho na~chvíli zjednodušíme do 2D prostoru. Zde jedna dimenze bude představovat azimut a~druhá výšku nad obzorem. 

Pro názornost tohoto konceptu tohoto konceptu jsem vyvinul nástroj, dostupný na \link{https://2ddemo.mp.itoncek.space}{https://2ddemo.mp.itoncek.space}. V~levém horním rohu je zobrazena kartézská soustavu souřadnic, kde osa $x$ (znázorněná červeně) představuje azimut a~osa $y$ (znázorněná zeleně) představuje výšku nad horizontem. Umístění bílého křížku na grafu znázorňuje aktuální střed pohledu na obloze. Tím jsou definovány dvě dimenze z~pěti.

Zbývající tři dimenze představuje přiblížení pohledu, čas a~datum simulace. V~tomto pětidimenzionálním prostoru se nachází každý snímek ze všech novějších videí AstroCrew. Každý snímek z~obou projektů, které jsou tématem této práce, lze popsat pomocí souřadnic v~tomto prostoru.

Nyní máme matematicky definované počáteční a~koncové souřadnice snímků přechodů a~můžeme využít rovnici lineární interpolace k~výpočtu souřadnic všech snímků, které leží mezi těmito limitními hranicemi.
\[c = (1-t)*A + t * B\] 
Tato rovnice převede každou hodnotu mezi $t=0$ (začátek přechodu) a~$t=1$ (konec přechodu) na hodnotu, která leží na úsečce $\overleftrightarrow{AB}$. Bod $A$ definujeme jako počáteční bod a~bod $B$ jako koncový bod přechodu. Tato rovnice se často nazývá \textit{lerp(A,B,t)} a~tuto definici budu po zbytek kapitoly používat. Poté pomocí lineární interpolace vypočítám vektory jednotlivých snímků v~přechodu.%chktex 36

Výsledná animace je ve~výše zmíněném nástroji označena tlačítkem \enquote{Lineární}. Animace je zde sice plynulá, ale začátky a~konce jsou trhané. Proto vstupní faktor $t$ nejdříve přetransformuji, abych se zbavil trhavých pohybů, které mohou být pro diváky nepříjemné. 

Je několik možností, jak tuto pomocnou transformaci provést. Jednou variantou je kvadratický přechod. Zde faktor $t$ upravíme pomocí rovnice:
\[u = lerp({t}^{2}, inv({inv}^{2}(t)), t)\]
Kde \textit{inv(x) = 1-x} a~výsledný faktor $u$ použijeme dále ve standardní lineární interpolaci.  V~ukázce je tato animace označena tlačítkem \enquote{Kvadratický}. Výsledný přechod začíná a~končí výrazně plynuleji, dosáhli jsme tedy toho, co jsme potřebovali. %chktex 36 %chktex 9 %chktex 15

Dalšími variantami jsou přechody kubický a~exponenciální. Oba začínají sice plynuleji než kvadratický, ale ve střední části cesty naberou výrazně vyšší rychlost, která je v~případě pozorování oblohy nepraktická a~může být potenciálně nepříjemná pro diváky. Pro jiné aplikace může být naopak lepší volbou. Například se využívá v~uživatelských rozhraních na mobilních telefonech, nebo dynamické zobrazení animovaných sloupcových grafů (například volebních preferencí nebo výsledků hlasování). Další nevýhodou kubického a~exponenciálního přechodu je relativní složitost vyjádření pomocí jedné funkce. Tyto přechody jsou často simulovány spojením dvou funkcí v~$t=\frac{1}{2}$. Obě dvě animace je možné najít ve výše zmíněném nástroji pod tlačítky \enquote{Kubický} a~\enquote{Exponenciální}.

Nyní máme trajektorii definovanou matematicky pomocí kvadratické funkce. Na trajektorii tedy můžeme rozmístit požadované množství snímků. Pro většinu animací v~našich videích používám 500 snímků, které tvoří 10 sekund finálního videa.

Nástroj StellariumPanoramaCreator (dále jen SPC), který jsem pro tento úkol vytvořil, výše popsanou matematiku implementuje do praxe. Ve skriptu je předem definováno, jaké kroky má Stellarium provést. StellariumPanoramaCreator je volně dostupný ke stažení na adrese \link{https://github.com/IToncek/StellariumPanoramaCreator}{github.com/IToncek/StellariumPanoramaCreator}. 

Při svém běhu postupně prochází skrze předprogramované instrukce, které jsou zabudované přímo ve zdrojovém kódu a~generuje podle nich řádky skriptu a~případné složky, potřebné pro úspěšný běh skriptu. Mezi funkcemi, které často využívám se nachází například funkce \textit{setup()}. Připraví Stellarium pro zaznamenávání videa (vypne veškerá překrytí, změní model atmosféry, skryje objekty Sluneční soustavy, \ldots). Funkce \textit{move()}, která otočí kameru na pozici dodanou v~parametru \textit{orientation}, nastaví datum a~čas dodaný v~parametru \textit{datetime}. Další využívanou funkcí je \textit{cheese()}, která pořídí snímek v~aktuální orientaci a~uloží ho ve formátu TIFF.% chktex 36

Z těchto základních \enquote{stavebních} funkcí jsou poté sestavovány funkce komplexnějšího rázu, jako například funkce \textit{slideTo()}. Tato funkce vytváří primitivním způsobem skriptové soubory tak, že pro každý snímek definuje otočení pohledu, změnu času a~dne, změnu přiblížení a~uloží výsledný pohled do souboru. % chktex 36

Během přípravy této maturitní práce do sady funkcí přibyla nová kategorie funkcí, které nechávají veškeré výše uvedené výpočty na Stellariu. Tato nová metoda umožňuje využití automatického výpočtu trajektorie za běhu skriptu místo generování jednotlivých bodů trajektorie předem. 

Jednou z~dalších nových funkcí je \textit{travelTrack()}, která vytvoří plynulý přechod mezi nebeskými souřadnicemi dvou objektů bez nutnosti zadávání jejich souřadnic do logiky skriptu. Další novou funkcí je \textit{slideTrack()}, která sleduje jeden vybraný objekt a~zajistí, že je na každém snímku přesně uprostřed. % chktex 36

Pro ukládání takto vygenerovaných snímků využívám formát TIFF, který mi poskytuje vysoce kvalitní data, komprimována bezztrátově pomocí algoritmu LZW\footnote{Algoritmus Lempel-Ziv-Welch je univerzální algoritmus na bezztrátovou kompresi dat.  ---~\cite{wiki:lzw}}.

Jeden takový snímek má rozlišení \(3840\times2160\) pixelů a~velikost 5--7MB.\@ Dohromady má jeden přechod mezi scénami velikost přibližně 7GB.\@ Pro celé video by to znamenalo velikost přes 200GB.\@ Aktuálně nevlastním žádný disk s~dostatečnou kapacitou a~rychlostí pro střih videa těchto rozměrů. Proto v~posledním kroku příprav převedu každý přechod do formátu ProRes, který mi umožňuje snížit velikost na pouhých 10GB na celý projekt, za cenu minimální ztráty na kvalitě. 

Při kompilaci jednotlivých snímků do videí nastavuji finální snímkovací frekvenci projektu, jíž je pro AstroCrew 50 sn./s. Tato snímkovací frekvence je v~souladu s~frekvencí evropské elektrické sítě, standardy Evropské unie a~příjemná pro oko diváka.

Pro video o~\enquote{Úkazech na obloze v~roce 2025} jsem zvolil trochu jiný postup. Přechody ukládám ve formátu JPEG2000. JPEG2000 je standard, vyvinutý skupinou Joint Photographic Experts Group\fcite{jpeg2000}, který má za úkol rozšířit schopnosti standardu JPEG 1\fcite{jpeg1}. JPEG2000 poskytuje bezztrátovou i ztrátovou kompresi, až 16384 barevných kanálů, obrázky o rozměrech v terapixelech. Využívá se například v kinech jako součást standardu DCP, archivaci nebo ve formátu MJPEG2000 jako kodek pro přenášení streamu videa při produkci\fcite{jpeg2000:usage}. 

Výhodou JPEG2000 pro tento projekt je možnost nastavení úrovně komprese a vysoká rychlost proti již tak rychlému standardu JPEG 1. Video je tak možné na konci procesu celé vyrendrovat znova a~opravit případné drobné detaily, které ve videu mohly vziknout v~průběhu jeho tvorby.
\subsection{Kompletace videa v~programu DaVinci Resolve}\label{makingof:resolve}
DaVinci resolve je stříhací software od firmy Blackmagicdesign. Kromě střihu videa lze v DaVinci Resolve tvořit 2D a 3D efekty, upravovat barvy videa, mixovat hudbu a exportovat ve všech formátech které můžete jako filmař potřebovat. DaVinci Resolve Studio (placená verze DaVinci Resolve) je mířená na pokročilé uživatele a řádná filmová studia. Blackmagicdesign poskytuje také verzi DaVinci Resolve, která je kompletně zdarma za cenu několika chybějících funkcí, které ale normální uživatel příliš často nepoužije.\fcite{resolve:manual}

\subsubsection{Struktura videa}\label{makingof:resolve:structure}
Každé video se skládá z~mluveného slova, hudby, simulace noční oblohy, scénáře a~titulků. Základem celého videa je mluvené slovo, kterému se přizpůsobují všechny další složky. Mluvené slovo vložím na časovou osu a~rozdělím na jednotlivé odstavce tak, aby mezery byly v~momentech, kdy bude potřebný přechod v~simulaci oblohy. Poté začnu na časovou osu rovnat jednotlivé obrazové části.

V úvodu videa diváky přivítáme a~stručně jim představíme obsah dílu. Zároveň je upozorníme, že informace uvedené ve videu neplatí po celém světě, ale pouze kolem 50.\@ rovnoběžky severní šířky a~pouze v~uvedeném časovém rozmezí. Zde také shrneme krátce podmínky pro pozorování noční oblohy v~daném měsíci. V~této části obrazová stopa ukazuje časosběry s~astronomickou tématikou, nejčastěji pohledy na noční oblohu nebo výhledy z~Mezinárodní vesmírné stanice. Tato videa nevznikají ze simulací ale jedná se o~videa veřejně dostupná.

V hlavní části videa využíváme jako podklad mluveného slova simulace ze Stellaria, které jsme získali postupem popsaným výše. V~této části jsou na obloze zobrazeny jednotlivé hvězdy, jejich spojnice, které vytvářejí tvary souhvězdí, a~umělecké ztvárnění souhvězdí, korespondující s~jejich názvy. Takto divák může lépe souhvězdí nalézt, když se podívá na skutečnou noční oblohu. 

Během představování každého souhvězdí jsou popisovány i~zajímavé objekty hlubokého vesmíru, které lze v~oblasti daného souhvězdí nalézt. Mezi snadno viditelné objekty hlubokého vesmíru se řadí hvězdokupy, mlhoviny a~galaxie. Existují i~další objekty hlubokého vesmíru, jako například černé díry nebo aktivní galaktická jádra, která ale nemůžeme snadno pozorovat bez speciálního vybavení, například zrcadlový dalekohled GTC (Gran Telescopio Canarias) na Kanárských ostrovech, dalekohled VLT (Very Large Telescope) na poušti Atacama v~Chile nebo Hubblův vesmírný teleskop, a~z~tohoto důvodu je v~našich videích neuvádíme.

Souhvězdí a~objekty hlubokého vesmíru jsou ve videu chronologicky řazeny podle nejlepšího času pozorování v~průběhu noci --- od západu k~východu slunce. 

V následující části zmiňujeme nejdůležitější astronomické události, které v~průběhu měsíce pravidelně nastávají. Jedná se například o~meteorické roje, noční svítící oblaka a~pravidelné charakteristiky podmínek pozorování (např.\ v~zimě jsou na pozorování nejlepší podmínky, ale je chladno a~doporučujeme proto divákům s~tím počítat, nežli vyrazí do mrazivé noci nepřipraveni). Tento koncept videa umožňuje jej pravidelně používat každý rok v~daném měsící bez nutnosti jakýchkoliv úprav.

\subsubsection{Časová osa scény}\label{makingof:resolve:merging}
Následující obrázek zachycuje uspořádání jednotlivých částí scény na časové ose.

\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{timeline_annotated.eps}
	\caption{Časová osa jedné ze scén. Každá důležitá část scény má přiřazené číslo.}\label{img:timeline}
\end{figure}
Číslo 1 označuje animace, při kterých se obraz pohybuje, a~až na vyjímky neobsahuje mluvený komentář. Animace slouží k~posunu pohledu pozorovatele do jiné části oblohy, čímž pozorovatel neztratí orientaci na obloze. 

Číslem 2 je označen statický snímek, který slouží jako podklad pro danou scénu. 

Číslo 3 označuje snímky jednotlivých souhvězdí. Oba tyto typy snímků vznikají samostatně zároveň s~generováním předchozí animace v~programu Stellarium.

Číslo 4 označuje tzv.\ pointer. Jedná se o~animovaný klip zářícího výrazného pulzujícího čtverce se zaoblenými rohy. Tím je zvýrazněn objekt o~kterém právě pojednává scénář. Pointer je zobrazen na obrázku~\ref{img:pointer}. 

\begin{figure}[H]
	\centering
	\includegraphics[width=.5\textwidth]{pointer.eps}
	\caption{Pointer --- animace využívaná pro upřesnění pozice objektu, o~kterém v~daném momentě hovoří.}\label{img:pointer}
\end{figure}

Číslo 5 označuje snímky objektů hlubokého vesmíru, které jsou do snímku vloženy nejdříve pomalu na místě, kde se objekt na obloze nachází. Jakmile se komentář zmíní o~daném objektu, spustí se animace, která obrázek zvětší, dá divákovi několik sekund na prohlédnutí obrázku, a~poté obrázek zase stejným způsobem zmizí.

Číslem 6 jsou označeny tzv. Adjustment Clips. Těmito klipy mohu ovlivnit všechny části scény, které se nachází na časové ose pod nimi. V~případě situace ukázané na obrázku~\ref{img:timeline} se jedná o~ztmavení všech nižších vrstev, aby lépe vynikla fotografie Velké mlhoviny v~Orionu, kterou pořídil náš scénárista Daniel Kurtin.

Číslem 7 je označena stopa s~mluveným slovem a~číslem 8 je označena hudební stopa. Obě stopy běží většinou souběžně. V~místech mluveného komentáře je hlasitost hudební stopy potlačena, aby bylo mluvené slovo zřetelně slyšet.

Čísla 9 --- 13 označují titulkové stopy. Jejich počet a~využití se mění podle požadavků daného projektu. Tyto stopy využíváme nejen pro standardní využití ve formě titulků v~češtině a~někdy v~angličtině, ale využíváme je i~jako prostor pro citování zdrojů obrazových materiálů, pro opravu chyb v~již vydaném videu, pro poznámky a~doplnění obsahu od editora a~pro stopu s~informacemi o~zdrojích hudby. Tento přístup využíváme zejména kvůli jednoduchosti tvorby titulků, možnosti jejich úpravy po vydání videa a~možnosti je skrýt, pokud jimi nechci být rušen. 
\subsubsection{Mixování obrazové části}
Další úpravy obrazové části jsou zaměřeny na vrstvení jednotlivých částí scény přes sebe. Bez těchto úprav by nebylo možné skrz jednotlivé vrstvy vidět, co je pod nimi. Například by bylo vidět pouze jedno souhvězdí, nebo objekty hlubokého vesmíru by byly na černém pozadí místo jejich prolínání s~atmosférou.

Záběry jsou vrstveny přes sebe pomocí metody Lighten přímo v~programu DaVinci Resolve, která pro každý pixel obrázku vybere nejjasnější barvu ze všech vrstev na daném snímku videa. Toto umožňuje vzájemné překrytí obrázků souhvězdí a~objektů hlubokého vesmíru, aniž by bylo třeba odstraňovat u~každého pozadí. 

Úprava pro objekty hlubokého vesmíru probíhá následovně:

Nejprve získám obrázek daného objektu z~internetu, například z~Wikipedie, která poskytuje jasné licenční podmínky. Pokud na Wikipedii není vhodný nebo dostatečně kvalitní obrázek, prohledám další fotografie na internetu. Občas ani tento krok nestačí, zejména u~objektů nezajímavých na focení. Poté využiji celooblohové sady dat, například Digitized Sky Survey 2 nebo Mellinger color optical survey, které lze získat z~Centra astronomických dat univerzity ve Štrasburku díky jejich nástroji Aladin. Tyto sady dat pokrývají značnou část celé oblohy a~v~České republice pokrývají 100\% viditelné oblohy. 

Získané fotografie následně upravuji pomocí software Zoner Photo Studio X, kde upravím kontrast pozadí tak, aby bylo absolutně černé a~tudíž při kompletaci zmizelo. Následně odstraním hvězdy blízko okraje snímku, aby byl přechod mezi snímkem a~pozadím méně znatelný. Takto pracuji pouze s~obrázky z~jiných zdrojů než ze Stellaria.
\subsection{Mixování zvukové části}
Ve zvukové části jsou na sebe vrstveny stopy hudby a~mluveného slova. Hudbu vybírám ze seznamu hudby v~knihovně YouTube a~ze seznamu skladeb, využívaných softwarem SpaceEngine. SpaceEngine je simulátor vesmíru, zaměřen spíše na jiné pohledy na vesmír než ze Země. Jeho hudební knihovna obsahuje skladby které mají evokovat atmosféru různých míst ve vesmíru. Při vybírání hudby k~videu je základním kritériem, aby hudba diváka nijak nerušila a~zároveň dotvářela atmosféru celého videa. Jako úvodní hudbu v~našich videích používáme skladbu \textit{Beyond --- Patrick Patrikios} ze zvukové knihovny YouTube. V~hlavní části se objevují skladby z~software SpaceEngine, jako například \textit{Space G Lydian --- Alfred Potter}, \textit{The Blithering Heights --- Akira} a~\textit{A peaceful Place --- Goodstreet}. V~závěru videa využíváme skladbu \textit{Instant Crush --- Corbyn Kites} znovu ze zvukové knihovny YouTube.
\section{Historie Astronomie}
Astronomie se začala rozvíjet, stejně jako většina ostatních věd, již ve starověku. V~různých kulturách byla využívána k~různým účelům. Již v~starověkém Egyptě využívalo lidstvo hvězd k~určení času. Byly nalezeny tabulky, které popisovaly 18 skupin hvězd (z nich bylo používáno pouze 12), zvaných dekanty. Každá skupina hvězd vycházela každý den o~40 minut později. Den roku tak spolu s~výškou nad obzorem umožňoval získat relativně přesný čas i~v~noci. Byla také poprvé určena délka roku na 365 dní~\fcite{arxiv:egypt}. 

V Egyptě také poprvé popsali souhvězdí noční oblohy. Tato souhvězdí nemají stejné názvy jako naše současná souhvězdí. Místo toho názvy souhvězdí reflektují Egyptské náboženství. Například na současném místě souhvězdí Oriona popisovali souhvězdí Kráčejícího muže~\fcite{enim:egypt}.

Studiem Egyptské astronomie se také můžeme dozvědět mnoho o~současné astronomii. Z~map, které se dochovaly ze starověkého Egypta se dá vyčíst, že v~této době nebyla Polárka ($\alpha$ Ursae Minoris) nejbližší hvězdou k~severnímu oblohovému pólu. Místo Polárky tuto funkci plnila hvězda Thuban ($\alpha$ Draconis) ze souhvězdí Draka. 

Dále porovnáním tehdejších a~dnešních map můžeme zmapovat pohyb jednotlivých hvězd po obloze. Nejlepší ukázkou tohoto chování je hvězda Arcturus ($\alpha$ Bootis) ze souhvězdí Pastýře. Na obrázcích~\ref{fig:-4000} a~\ref{fig:2025} níže můžete porovnat tvar tohoto souhvězdí v~roce 4000 př.n.l.\ a~2025 n.l.\@ Takto můžeme pozorovat změny v rozmístění objektů na obloze za více než 6000 let. Hvězda Arcturus je nejznámnější ukázkou pohybu hvězd vůči pozadí vesmíru, díky její vysoké jasnosti na naší obloze.

\begin{figure}[H]
	\centering
	\begin{minipage}{.45\textwidth}
	  \centering
	  \includegraphics[width=1\linewidth]{-4000.png}
	  \captionof{figure}{Pohled na souhvězdí Pastýře v~roce 4000 př.\ n.\ l.\@ Simulace: Stellarium}~\label{fig:-4000}
	\end{minipage}%
	\hspace{.8cm}
	\begin{minipage}{.45\textwidth}
	  \centering
	  \includegraphics[width=1\linewidth]{2025.png}
	  \captionof{figure}{Pohled na souhvězdí Pastýře v~roce 2025 n.\ l.\@ Simulace: Stellarium}~\label{fig:2025}
	\end{minipage}
\end{figure}

Pomocí hvězd se v historii orientovali mořeplavci nebo zeměměřiči. Pomocí sextantu, nebo jiného nástroje pomocí kterého lze určit výšku zvoleného objektu nad obzorem, změříme výšku Polárky ($\alpha$ Ursae Minoris) nad obzorem, zjistíme tak naši severní šířku. Výška Polárky nad obzorem je přibližně rovna severní šířce pozorovatele. K zjištění severní šířky lze využít i pozici slunce, ale tato metoda je výrazně složitější.\fcite{arxiv:celestial_navigation}

Pro východní délku je tento problém mnohem těžší. Zde je nutno znát přesný čas měření a za pomoci východu a západu slunce určit, o kolik časových zón jste vzdáleni od Greenwiche.

\section{Historie a~vývoj procesu tvorby astronomických videí}
Proces tvorby našich astronomických videí se v~průběhu let výrazně měnil a~vyvíjel. První video jsme vytvořili v~roce 2021 a~od té doby jich vzniklo dalších 10. V této části se podíváme na celou historii tvorby astronomických videí skupiny Astro\-Crew.
\subsection{Začátky --- Prosinec 2021}
Naše cesta začala 14.\ prosince 2021, kdy jsme vydali první video. Toto video nebylo primárně určeno k~vydání na platformě YouTube, ale bylo vytvořeno pro planetárium v~iQLandii, kde jsme ho představili již 9.\ prosince 2021 na pravidelné akci \enquote{Večery pod hvězdami}. 

Celé video je vytvořeno pro promítání v~planetáriu a~z~tohoto důvodu je promítnuto sféricky, jak můžete vidět na obrázku~\ref{img:prosinec}. Pro vydání na YouTube jsme toto video modifikovali, aby ho YouTube akceptoval jako 360° video, i~když polovina videa je čistě černá (vše co je pod horizontem planetária není vidět). 

\begin{figure}[H]
	\centering
	\includegraphics[width=.7\textwidth]{prosinec.eps}
	\caption{Ukázka našeho prvního videa.}\label{img:prosinec}
\end{figure}

Produkce tohoto videa byla velice náročná. V~té době jsem pro střih využíval stříhací program Adobe Premiere Pro. Software byl velice nestabilní, zvláště s~náročností 4K videa a~složitými transformacemi na sféru. Veškerá tvorba animací tehdy probíhala výhradně manuálně a~byla tedy časově náročná. 

Toto video jsem natáčel tak, že jsem namířil Stellarium podobně, jako je namířená kopule planetária v~iQLandii a~poté jsem pomocí přesouvání času přemisťoval souhvězdí a~jednotlivé objekty tak, aby byly co nejlépe vidět. 

Následně jsem pomocí programu Adobe After Effects vložil do scény obrázky jednotlivých objektů hlubokého vesmíru pomocí integrovaného efektu VR Converter. Díky technologii Adobe Dynamic Link jsem poté jen vložil kompozice z~After Effects přímo do časové osy v~Premiere Pro a~nemusel jsem je exportovat. 

Bohužel tento přístup je neskutečně pomalý a~snižuje významně výkonnost celého stříhacího programu. Z~tohoto důvodu je Prosinec 2021 jediným videem vytvořeným v~tomto stylu.

\subsection{Jednoduchá éra --- Březen až Květen 2022}
Celý proces, jak jsem ho popsal v~sekci~\ref{makingof}, je aktuálním stavem tvorby. Na úplném začátku produkce tento proces ještě neexistoval a~veškeré znalosti potřebné pro tvorbu \textquote{moderních} videí bylo nutné získat postupným experimentováním. Videa v~této éře byla velice jednoduchá. Animace byly vytvořeny nahráváním okna Stellaria a~jeho ovládáním přes webové rozhraní.

Ačkoliv tento proces byl jednoduchý na provedení, byl náročný na čas. Pokud jsem netrefil objekt, bylo nutné se vrátit na předchozí a~nahrát celý přechod znovu. Když se Stellarium zaseklo někde během přechodu, bylo nutné daný přechod nahrát znovu. Tyto situace se mohou zdát banální, ale při množství přechodů, které byly v~té době ve videích, se tyto časové nároky nasčítaly a~výrazně zpomalily celou produkci videa. Ukázka finálního videa z~této éry je připojena níže jako obrázek~\ref{img:brezen}.

\begin{figure}[H]
	\centering
	\includegraphics[width=.85\textwidth]{brezen.png}
	\caption{Ukázka našeho prvního videa.}\label{img:brezen}
\end{figure}

Do této éry patří ještě video s~názvem \textquote{Jak pozorovat zatmění Měsíce 16.5.2022}, které vybočuje svojí tématikou. Vydali jsme jej 13. 5. 2022 jako návod na pozorování nadcházejícího zatmění Měsíce. Toto video značí přechod k~další éře, protože neobsahuje ani jeden záběr ze Stellaria. Skládá se primárně ze záběrů zatmění měsíce a~animace vygenerované pomocí systému Space Engine. Ačkoliv toto video má největší počet shlédnutí na našem YouTube kanálu, má relativně nízký dopad na náš YouTube kanál, protože většina těchto shlédnutí je ze stránek seznam\-zpravy.cz\footnote{Článek je dostpuný na \link{https://mp.itoncek.space/redirect/seznamzpravy-clanek}{itoncek.space/redirect/seznamzpravy-clanek}}, kam toto video nasdílel Martin Gembec, vedoucí planetária v~iQLandii.
\subsection{Éra spěchu --- Červen a~Červenec 2022}
Červnové a~červencové Astronomické desetiminutovky byly stříhány ve velikém spěchu. S~příchodem prázdnin se množství volného času, který jsem měl k~dispozici na stříhání se snížilo, a~tudíž bylo třeba produkci optimalizovat. V~této době jsem také začal přecházet do nového stříhacího programu, zvaného DaVinci Resolve, který využívám doteď. Tato změna prostředí produkce znamenala, že videa musela být jednodušší na produkci a~tudíž kvalita lehce upadla. Ukázku finálního videa jsem připojil v~přílohách jako obrázek~\ref{img:cervenec}.

\begin{figure}[H]
	\centering
	\includegraphics[width=.85\textwidth]{cervenec.png}
	\caption{Ukázka Červencového videa.}\label{img:cervenec}
\end{figure}

Tato videa jsou jednoduchá, složená z~časosběrných záběrů se zvukovým komentářem a~občasnými grafikami, vytvořenými ručně ve Stellariu. Videa jsou opravdu základní. Rád se bych je v~budoucnu pokusil předělat na moderní formát. Nicméně tato éra sloužila jako další nezbytný krok k~modernímu procesu, který se poprvé projevil v~únorových Astronomických desetiminutovkách.
\subsection{Renezance Astrocrew --- Únor 2023}
Únorové video je první, které se dá kategorizovat do skupiny moderních AstroCrew videí. V~této době jsem poprvé začal pracovat se Stellariem jako s~nástrojem pro generování snímků, která jsou později spojovány do videa. Zbavil jsem se tak přímého nahrávání videa, které předtím zabralo výraznou část času produkce.

Základní nápad této metodiky byl jednoduchý: nafotit celooblohovou panorámu, složit jí do jednoho snímku a~ten poté otáčet ve stříhacím programu. V~této době jsem začal tvořit nástroj StellariumPanoramaCreator (dále jen SPC), který se již v~produkci udržel. První verze SPC byla velice jednoduchá. Skript převzal kontrolu nad klávesnicí a~myší mého počítače a~pomocí integrovaného okna přímo ve Stellariu, které umožňovalo zadat azimut a~výšku, postupně nafotilo všech 54 snímků. Z~nich se složila finální panoráma za pomoci programu Hugin\footnote{Hugin je open-source nástroj na spojování jednotlivých snímků, vyfocených ze stejného místa s různými orientacemi, do jedné panorámy. }, který obdržel všechny snímky a~projektový soubor s~informacemi o~pozicích snímků vygenerováný při běhu SPC.\@

Zpracování těchto dat bylo mnohem komfortnější než skládání videí natočených manuálně. Proces stále vyžadoval mnoho práce, než byla získána vstupní data. Tento čas nebylo možno nijak jinak využít, protože při běhu SPC nebylo možné využívat klávesnici ani myš. Nebylo možné ani odkliknout z~okna jinam, protože v~ten moment SPC ovládá klávesnici a~myš. Mohl jsem pouze sedět a~sledovat, co se děje na obrazovce. Snímání jedné panorámy trvalo 10 --- 15 minut. Proto dalším logickým krokem bylo převedení komunikace SPC se Stellariem na pozadí. 

Ideálním řešením se ukázalo webové rozhraní Stellaria. Tento modul je určen pro řízení Stellaria z~tabletu nebo jiného počítače v~případě, že není možné ovládat přímo počítač se Stellariem, například pokud je počítač využíván pro demonstraci na hvězdárně. Na pozadí tento systém využívá protokol HTTP, který umožňuje přistupovat k~specifickým částem kódu Stellaria přes síť. Tento modul vznikl jako projekt v~rámci akce \textquote{ESA Summer of Code 2015}\fcite{stellarium:rcDoc}. 

Dokumentace\fcite{stellarium:rcAPI} tohoto protokolu je bohužel v~některých místech relativně chaotická a~nečitelná. Pro vývoj jsem tedy použil existující HTML rozhraní. Pomocí vývojářských nástrojů, dostupných ve většině moderních prohlížečů, jsem postupně zjistil veškeré adresy a~parametry, které Stellarium potřebuje. Poté jsem nástroj SPC přepsal, aby místo ovládání klávesnice a~myši využíval nově dostupné HTTP dotazy. Po náročné optimalizaci načasování jednotlivých příkazů se časová náročnost snížila přibližně na polovinu předchozího času a~celý proces mohl nyní proběhnout na pozadí. Ukázku finálního videa je na obrázku~\ref{img:unor}.

\begin{figure}[H]
	\centering
	\includegraphics[width=.85\textwidth]{unor.png}
	\caption{Ukázka videa z~února 2023.}\label{img:unor}
\end{figure}

V této fázi střih probíhal zpět v~Adobe Premiere Pro primárně kvůli pluginu Gopro FX Reframe. Ten panorámu vygenerovanou v~SPC převedl na perspektivní zobrazení. Tento systém měl mnoho výhod oproti předchozímu procesu, při kterém bylo nutné perfektně trefit načasování při natáčení. Když se něco nepodařilo, bylo nutné celý segment natočit znovu. V~této nové verzi procesu stačilo při nějaké chybě přeanimovat poslední přechod a~upravit časování sekvence. I~tak, tento postup nesl značné nevýhody. Hlavní z~nich byla vysoká zátěž počítače, z~části způsobená náročností samotného stříhacího programu. Tento fakt znamenal, že render Únorových Astronomických desetiminutovek zabral přibližně 90 minut na výsledných 12 minut videa. V~říjnu 2023 se navíc plugin Gopro FX Reframe úplně přestal fungovat, což zrušilo vydání říjnových Astronomických desetiminutovek. Proto pro následující projekt bylo nutné vyvinout nový proces. 
\subsection{Moderní Astrocrew --- videa Rok 2024, Prosinec 2024 a~Rok 2025}
V listopadu roku 2023 přinesl Dan do naší skupiny nápad vytvořit video shrnující úkazy, které budou vidět v~roce 2024 na obloze. Po nedávném neúspěchu ve tvorbě říjnových Astronomických desetiminutovek bylo nutné změnit celý proces. Prvním pokusem bylo využití animačního programu Blender a~zachování exportu panorám a~jejich pozdější přemapování do perspektivního zobrazení. 

Tento postup sice fungoval, ale při tvorbě jsem byl nucen každé video exportovat \(2\times \), jednou jako panorámu a~jednou jako animovaný přechod. Během pokusů s~touto metodou mě napadla revoluční myšlenka. Místo exportu celé panorámy, ze které jsem pokaždé minimálně polovinu zahodil, exportovat pouze potřebnou oblast pro finální video. 

V této epoše se StellariumPanoramaCreator (dále jen SPC) jsem již přepsal téměř do současné podoby. Jako vstupy sloužily souřadnice a~časy jednotlivých přechodů. SPC následně ovládal Stellarium pomocí HTTP, jako v~předchozí éře. Výstupem bylo 500 snímků pro každý přechod v~rozlišení \(3840\times2160\) pro složení do finálního videa. 

Ačkoliv tento postup byl výrazně rychlejší a~příjemnější, odhalil jsem také několik slabých stránek implementace webového rozhraní Stellaria. Stellarium je schopné z~webu zpracovávat příkazy pouze sekvenčně, tudíž není možné odeslat všechny příkazy naráz a~jen počkat, než se Stellarium vzpamatuje. Místo toho je nutné načasovat každý příkaz tak, aby strávil ve frontě příkazů minimum času. 

Tímto způsobem bylo vytvořeno video \textquote{Co nás čeká na obloze v~roce 2024?}. Pro videa \textquote{Astronomické desetiminutovky --- Prosinec} a~\textquote{Co nás čeká na obloze v~roce 2025?} byla provedena malá změna. Příkazy se přestaly odesílat přes HTTP, ale byly zapsány přímo do skriptového souboru Stellaria, které následně tyto příkazy spustilo v~maximální dostupné rychlosti. To umožnilo dosáhnout minimálních časových ztrát při běhu skriptu a~zajistilo maximální efektivitu.
\newpage
\part{Praktická část}
\section{Astronomické desetiminutovky --- Prosinec}
Celé video můžete shlédnout na \link{https://youtu.be/RHS7FwtCN1A}{youtu.be/RHS7FwtCN1A}.

Prosincové Astronomické desetiminutovky jsme stavěli podobně, jako všech\-ny předchozí. Na začátku bylo několik informací spojených s~měsícem prosinec. Například fakt, že v~prosinci jsou nejdelší noci, a~to až 16 hodin dlouhé a~díky tomu můžeme vidět souhvězdí ze všech ročních období. 

Dále video pokračuje popisem letní oblohy, kterou můžeme v~prosinci vidět těsně po západu slunce. Zde můžeme vidět Labuť, Lyru a~Orla, tři souhvězdí, jejichž nejjasnější hvězdy na obloze tvoří asterismus\footnote{Výrazná skupina hvězd, která ale není souhvězdím. Například Velký vůz, Herkulův květináč ve Střelci nebo právě Letní trojúhelník} Letní trojúhelník. Dále poté ukazujeme souhvězdí Herkula, ve kterém se nachází další asterismus, zvaný Herkulův květináč, a~kulová hvězdokupa M13.

\begin{figure}[H]
	\centering
	\includegraphics[width=.95\textwidth]{ac12_leto.png}
	\caption{Ukázka letního segmentu prosincových Astronomických desetiminutovek. V pořadí zleva Orel, Labuť, Lyra a Herkules.}\label{prac:ac12_leto}
\end{figure}

Následující segment se zaměřuje na podzimní souhvězdí. Zde ukazujeme souhvězdí Cefea, Kasiopeji, Andromedy a~Persea. Poté ukazujeme hvězdokupy, které se v~této oblasti oblohy nacházejí a~ukazujeme i~fotografii Velké galaxie v~Andromedě. Následně se posuneme blíže k~obzoru a~podíváme se na souhvězdí Pegase, Vodnáře, Ryb a~Velryby. 

\begin{figure}[H]
	\centering
	\includegraphics[width=.95\textwidth]{ac12_podzim.png}
	\caption{Ukázka podzimního segmentu prosincových Astronomických desetiminutovek. V pořadí zleva Cefeus, Kasiopea, Perseus a Andromeda.}\label{prac:ac12_podzim}
\end{figure}

V následujícím segmentu se již přesuneme později do noci a~zaměříme se na zimní souhvězdí. Zde můžeme vidět souhvězdí Vozky, Býka, Malého psa, Velkého psa, Blíženců, Eridanu a~Oriona. Jelikož tato část oblohy je v~prosinci dominantní, ukazujeme v~tomto segmentu videa nejvíce objektů hlubokého vesmíru. Nejzajímavějšími objekty jsou například hvězdokupy v~souhvězdí Býka, nazývané Hyády a~Plejády. Dále se zde nachází Velká mlhovina v~Orionu, zachycená na fotografii od našeho scénáristy Daniela Kurtina, nebo druhá nejjasnější hvězda naší noční oblohy Sirius.

\begin{figure}[H]
	\centering
	\includegraphics[width=.95\textwidth]{ac12_zima.png}
	\caption{Ukázka zimního segmentu prosincových Astronomických desetiminutovek. V pořadí zleva Malý pes, Blíženci, Orion, Vozka a Býk.}\label{prac:ac12_zima}
\end{figure}

Dalším segment videa se zaměřuje na jarní souhvězdí. Tato souhvězdí jsou v~prosinci vidět nejlépe brzy ráno nad východem. Do tohoto segmentu spadají souhvězdí Raka, Lva, Panny a~Pastýře. V~této části také zmiňujeme souhvězdí Velké medvědice, které je sice cirkumpolární\footnote{Velká medvědice je dostatečně blízko severního nebeského pólu, že ani v~momentě, kdy je na obloze nejníže, nezapadne za horizon.}, ale v~Prosinci ji uvidíme nejvýše právě brzy ráno.

\begin{figure}[H]
	\centering
	\includegraphics[width=.95\textwidth]{ac12_jaro.png}
	\caption{Ukázka jarního segmentu prosincových Astronomických desetiminutovek. V pořadí zleva Pastýř, Panna, Velká medvědice a Lev.}\label{prac:ac12_jaro}
\end{figure}

V posledním segmentu videa ukážeme meteorické roje, které mají svoje maximum právě v~daném měsíci. V~případě prosince se jedná pouze o~meteorický roj Geminid, pojmenovaných po souhvězdí Blíženců (lat. Gemini), ve kterém leží radiant\footnote{Bod na obloze, ze kterého meteory zdánlivě vylétají.} tohoto roje.

Celý scénář je k dispozici na \link{https://mp.itoncek.space/redirect/scenar-prosinec}{mp.itoncek.space/redirect/scenar-prosinec}.

Prosincové video je druhé video na našem kanále, které bylo renderováno pomocí metody skriptování Stellaria a~první skriptované video ze série Astronomických desetiminutovek. S~sebou přineslo mnoho změn v~procesu animace, zvláště pak v~oblasti editování. 

U předchozího videa ze série Astronomických desetiminutovek jsem ještě využíval celooblohových panorám a~pluginu Gopro FX Reframe. Prosincové Astronomické desetiminutovky byly tudíž novým milníkem v~produkci.

Prvním momentem, kdy se celá produkce změnila, byla scéna v~čase 2:55, kdy jsem potřeboval zvýraznit jedno ze souhvězdí (viz obrázek~\ref{prac:ac12_1}). V~předchozích videích jsem těchto efektů dosahoval pomocí maskování nepotřebných částí ve stříhacím programu. Takto jsem mohl vytvořit jeden snímek, který zachycoval všechna souhvězdí a~poté je jednotlivě maskovat v~editoru. Podobný postup jsem tedy využil i~poté, co jsem se zbavil celooblohového fotografování.

\begin{figure}[H]
	\centering
	\includegraphics[width=.95\textwidth]{ac12_1.png}
	\caption{Ukázka problematické scény z~prosincových Astronomických desetiminutovek.}\label{prac:ac12_1}
\end{figure}

Ačkoliv mi tento postup umožňoval větší kontrolu nad výsledným záběrem v~editoru, jeho nepraktičnost se ukázala v~momentě, kdy jsem byl nucen scénu mírně pootočit kvůli chybě ve výpočtu času ve skriptu. Byl jsem tedy nucen masku, kterou jsem již pečlivě naanimoval pro každé souhvězdí zvlášť během dalšího přechodu, celou předělat.

V ten moment jsem se zamyslel, zda by to nešlo udělat nějak lépe. Napadlo mě vyexportovat ze Stellaria jen potřebná souhvězdí a~zbytek skrýt. Ukázalo se, že Stellarium má pro tento účel marker \textit{FlagIsolateSelected}, který umožní Stellariu renderovat pouze souhvězdí, předem vybraná pomocí \textit{core.\-select\-Constellation\-By\-Name(name)}. Tato malá změna z~pohledu diváka mi ušetřila nespočet hodin animování masek pro celé video. %chktex 36

Novinkou pro toto video byl také způsob zapracování objektů hlubokého vesmíru do jednotlivých záběrů. S~tímto konceptem jsem si hrál i~u~zrušených říjnových Astronomických desetiminutovek, kde jsem dostal nápad, smíchat obrázky objektů hlubokého vesmíru s~daty ze Stellaria. První snímek, který takto vznikl, můžete vidět jako obrázek~\ref{prac:ac12_2}. 

\begin{figure}[H]
	\centering
	\includegraphics[width=.95\textwidth]{ac12_2.png}
	\caption{První snímek s~mixovanými objekty hlubokého vesmíru a~dat ze stellaria, zpracování: Zoner Photo Studio X.}\label{prac:ac12_2}
\end{figure}

Tohoto efektu dosáhneme pomocí míchání metodou Lighten, kde zvolíme nejjasnější barvu každého pixelu z~vrstev níže. Vstupní snímky, pokud se nejedná o~snímky kulových hvězdokup, nejdříve zpracuji pomocí Starnet++\footnote{Starnet}, který ze snímků odstraní hvězdy. Následně vyčistím pozadí daného snímku, aby bylo co nejtmavší, jak je to možné. Pozadí snímku chceme odstranit a~proto potřebujeme, aby ji metoda Lighten nikdy nevybrala. Tímto postupem se snažím zajistit, aby měly tyto pixely co nejtmavší barvu. Následně do snímku vrátím některé hvězdy, které nezasahují do pozadí (například u~snímku~\ref{prac:ac12_2} bílého trpaslíka uprostřed mlhoviny M57).

Poslední krok je zarovnání snímku na místo, kde se na obloze nachází v~realitě a~pomalé prolnutí, využívající neschopnosti oka diváka všimnout si pomalých změn.

Tento typ zpracování obrázků dostal podporu od zbytku týmu AstroCrew a~nyní ho využíváme pro zobrazení většiny objektů hlubokého vesmíru.

Další výraznou novinkou bylo zahrnutí titulků do videa. Nejen že obsahují přepis celého videa ze scénáře, ale u~tohoto projektu jsem sem začal dávat zdroje všeho obsahu, který ve videích využíváme. Takto jsou informace vždy připojeny přímo k~místu, kde se dané dílo nachází.

\section{Co nás čeká na obloze v~roce 2025?}
Celé video můžete shlédnout na \link{https://youtu.be/Jw2xIb8eS\_U}{youtu.be/Jw2xIb8eS\_U}.

Tento projekt se řadí do série projektů, které nemají sice oficiální název, ale interně tuto sérii nazýváme \enquote{Co nás čeká na obloze}. Tato videa mají diváka provést zajímavými událostmi v~nadcházejícím roce.

Tato série poprvé vznikla na začátku roku 2024 jako malý experiment, který jsme chtěli vyzkoušet a~po úžasném diváckem ohlasu, jsme se rozhodli, že i~v~roce 2025 toto video vytvoříme.

Video jsme i letos kompilovali chronologicky od začátku roku do konce. První zastávkou videa byl meteorický roj Kvadrantidy hned 3.\ ledna. Následoval jeden z nejhezčích úkazů roku, jímž byl zákryt Saturnu Měsícem 4.\ ledna. Tento úkaz byl dokonce natolik ikonický, že jsem ho zvolil jako tématiku náhledového obrázku pro předchozí video z této série, \enquote{Co nás čeká na obloze v roce 2024?}. Následují dvě setkání Měsíce a Marsu, konkrétně 14.\ ledna a 9.\ února. 14.\ ledna nás také čekalo maximum komety C/2024 G3 ATLAS.\@

Všechny čtyři tyto úkazy se již v době vydání staly, ale i přes to jsme je do videa zahrnuli.

Následuje trojice zatmění.\@ 14.\ března ráno proběhne zatmění Měsíce, které bude špat\-ně viditelné z Česka, ale v severní Americe bude rudý úplněk. 29.\ března v poledne bude následovat částečné zatmění Slunce zde u nás v České republice. Zakryje pouze 12\% Slunce ale i tak bude jednoduše pozorovatelné jen za pomoci slunečního filtru. 

Trojici zatmění zakončí 1.\ dubna večer zákryt Plejád Měsícem, kdy Měsíc začne krátce před půlnocí zakrývat otevřenou hvězdokupu M45, známou jako Plejády. Tato událost je dokonce natolik fotogenická, že jsem ji zvolil jako tématiku náhledového obrázku pro video \enquote{Co nás čeká na obloze v roce 2025?}.

\begin{figure}[H]
	\centering
	\includegraphics[width=.95\textwidth]{nahledovka-v2.jpg}
	\caption{Náhledový obrázek pro video \enquote{Co nás čeká na obloze v roce 2025?}. Kompozice snímku měsíce ze Stellaria a snímku Plejád z Observatoře Palomar. Měsíc a Plejády nemají stejné měřítko.}\label{prac:nahledovka-v2}
\end{figure}

Tématem alternativního náhledového obrázku byla fotografie Jakuba Kuřáka z planetária v iQLandii. Na snímku je polární záře a meteory z meteorického roje Perseid. Byla vyfocena na Jizerce. 

\begin{figure}[H]
	\centering
	\includegraphics[width=.95\textwidth]{nahledovka-v1.jpg}
	\caption{Alternativní náhledový snímek pro video \enquote{Co nás čeká na obloze v roce 2025?}.}\label{prac:nahledovka-v1}
\end{figure}

22.\ dubna proběhne maximum Lyrid. Tento rok bude Měsíc skryt pod obzorem a nebude rušit pozorování. Následuje několik měsíců bez zajímavých úkazů. Poté nás čekají Perseidy, tentokrát s úplňkovým Měsícem, který prakticky znemožní pozorování.

Zároveň s Perseidami proběhne 12.\ srpna konjunkce Venuše a Jupiteru, která se poté zopakuje 20.\ srpna, kdy se k dvojici planet přidá i Měsíc. 

Nejzajímavější údálostí roku 2025 bude úplné zatmění Měsíce, pozorovatelné od nás z České Republiky. 7.\ září večer vyjde v půl osmé večer již zatmělý Měsíc na oblohu. Po setmění, krátce před devátou hodinou, začne Měsíc ze zemského stínu vycházet a částečná fáze skončí před desátou.

12.\ září proběhne další přechod Měsíce přes otevřenou hvězdokupu Plejády. 21.\ září proběhne zatmění Slunce na Antarktidě.

Poslední segment videa se věnuje trojici meteorických rojů, které můžeme pozorovat na konci roku. 21.\ října nás čeká maximum meteorického roje Orionid, 17.\ listopadu nás čeká maximum roje Leonid a 13.\ prosince nás čeká maximum roje Geminid.

Náhled celého scénáře je k dispozici na \link{https://mp.itoncek.space/redirect/scenar-2025}{mp.itoncek.space/redirect/scenar-2025}.


Projekt Rok 2025 přinesl výraznou změnu ve způsobu záznamu animací. Nově jsem využil plných skriptovacích schopností Stellaria a přenechal některé přechody Stellariu. 

Místo zadání počátečních a koncových souřadnic mi nyní stačí zadat název objektů, které mají být uprostřed záběru na začátku a konci přechodu. Tento krok mi znovu umožňuje zjednodušit celé přípravy videa, kompletně odstraňující potřebu přepisovat souřadnice ze systému do skriptu. 

Tato změna mi také umožnila vytvořit nové přechody, které do té doby nebyly možné. V tomto videu často využívám metodu \textit{slideTrack()}, která každý snímek zamíří středem na zvolený objekt, udržujíce ho takto ve středu snímku. %chktex 36

\section{Závěr}
Práce na projektu AstroCrew mě dlouhodobě učí řešit různé problémy z oblastí informatiky, animace a jejich kombinace. Během práce na této maturitní práci jsem se naučil řádně číst dokumentaci již existujících programů a kompletně využívat veškeré dostupné způsoby ovládání Stellaria. Naučil jsem se také práci se systémem \LaTeX{}\footnote{Balíček nástrojů, umožňující tvořit standardizované textové práce a umožňuje detailní kontrolu nad umístěním každého elementu dokumentu. Spravuje také citace, které generuje zároveň s dokumentem.}, pomocí kterého jsem napsal celou tuto práci.

Ačkoliv jsem tuto práci dokončil, plánuji v projektu AstroCrew nadále pokračovat. Do budoucna plánuji několik zlepšení procesu tvorby videa, jako například plně interaktivní aplikaci, která umožní rychlejší a jednodušší tvorbu animací za pomoci Stellaria. 

Produkce videí se v blízké budoucnosti zpomalí, spolu s odchodem všech členů AstroCrew na vysoké školy a čas se pro nás stane vzácností. I přes to se pokusíme vydávat nepravidelně nová videa.

Digitální verze této maturitní práce je dostupná na \link{https://mp.itoncek.space}{mp.itoncek.space}
\end{document}
